"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const resource_policy_1 = require("./resource-policy");
var RemovalPolicy;
(function (RemovalPolicy) {
    /**
     * This is the default removal policy for most resources. It means that when the resource
     * is removed from the app, it will be physically destroyed.
     */
    RemovalPolicy[RemovalPolicy["Destroy"] = 0] = "Destroy";
    /**
     * This uses the 'Retain' DeletionPolicy, which will cause the resource to be retained
     * in the account, but orphaned from the stack.
     */
    RemovalPolicy[RemovalPolicy["Orphan"] = 1] = "Orphan";
    /**
     * This will apply the 'Retain' DeletionPolicy and also add metadata for the toolkit
     * to apply a CloudFormation stack policy which forbids the deletion of resource.
     */
    RemovalPolicy[RemovalPolicy["Forbid"] = 2] = "Forbid";
})(RemovalPolicy = exports.RemovalPolicy || (exports.RemovalPolicy = {}));
function applyRemovalPolicy(resource, removalPolicy) {
    if (removalPolicy === RemovalPolicy.Orphan || removalPolicy === RemovalPolicy.Forbid) {
        resource.options.deletionPolicy = resource_policy_1.DeletionPolicy.Retain;
    }
    // attach metadata that will tell the toolkit to protect this resource by
    // applying an appropriate stack update policy.
    if (removalPolicy === RemovalPolicy.Forbid) {
        resource.node.addMetadata('aws:cdk:protected', true);
    }
}
exports.applyRemovalPolicy = applyRemovalPolicy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3ZhbC1wb2xpY3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZW1vdmFsLXBvbGljeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVEQUFtRDtBQUVuRCxJQUFZLGFBa0JYO0FBbEJELFdBQVksYUFBYTtJQUN2Qjs7O09BR0c7SUFDSCx1REFBVyxDQUFBO0lBRVg7OztPQUdHO0lBQ0gscURBQU0sQ0FBQTtJQUVOOzs7T0FHRztJQUNILHFEQUFNLENBQUE7QUFDUixDQUFDLEVBbEJXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBa0J4QjtBQUVELFNBQWdCLGtCQUFrQixDQUFDLFFBQWtCLEVBQUUsYUFBd0M7SUFDN0YsSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sRUFBRTtRQUNwRixRQUFRLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxnQ0FBYyxDQUFDLE1BQU0sQ0FBQztLQUN6RDtJQUVELHlFQUF5RTtJQUN6RSwrQ0FBK0M7SUFDL0MsSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sRUFBRTtRQUMxQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUN0RDtBQUNILENBQUM7QUFWRCxnREFVQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc291cmNlIH0gZnJvbSAnLi9yZXNvdXJjZSc7XG5pbXBvcnQgeyBEZWxldGlvblBvbGljeSB9IGZyb20gJy4vcmVzb3VyY2UtcG9saWN5JztcblxuZXhwb3J0IGVudW0gUmVtb3ZhbFBvbGljeSB7XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBkZWZhdWx0IHJlbW92YWwgcG9saWN5IGZvciBtb3N0IHJlc291cmNlcy4gSXQgbWVhbnMgdGhhdCB3aGVuIHRoZSByZXNvdXJjZVxuICAgKiBpcyByZW1vdmVkIGZyb20gdGhlIGFwcCwgaXQgd2lsbCBiZSBwaHlzaWNhbGx5IGRlc3Ryb3llZC5cbiAgICovXG4gIERlc3Ryb3kgPSAwLFxuXG4gIC8qKlxuICAgKiBUaGlzIHVzZXMgdGhlICdSZXRhaW4nIERlbGV0aW9uUG9saWN5LCB3aGljaCB3aWxsIGNhdXNlIHRoZSByZXNvdXJjZSB0byBiZSByZXRhaW5lZFxuICAgKiBpbiB0aGUgYWNjb3VudCwgYnV0IG9ycGhhbmVkIGZyb20gdGhlIHN0YWNrLlxuICAgKi9cbiAgT3JwaGFuLFxuXG4gIC8qKlxuICAgKiBUaGlzIHdpbGwgYXBwbHkgdGhlICdSZXRhaW4nIERlbGV0aW9uUG9saWN5IGFuZCBhbHNvIGFkZCBtZXRhZGF0YSBmb3IgdGhlIHRvb2xraXRcbiAgICogdG8gYXBwbHkgYSBDbG91ZEZvcm1hdGlvbiBzdGFjayBwb2xpY3kgd2hpY2ggZm9yYmlkcyB0aGUgZGVsZXRpb24gb2YgcmVzb3VyY2UuXG4gICAqL1xuICBGb3JiaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UmVtb3ZhbFBvbGljeShyZXNvdXJjZTogUmVzb3VyY2UsIHJlbW92YWxQb2xpY3k6IFJlbW92YWxQb2xpY3kgfCB1bmRlZmluZWQpIHtcbiAgaWYgKHJlbW92YWxQb2xpY3kgPT09IFJlbW92YWxQb2xpY3kuT3JwaGFuIHx8IHJlbW92YWxQb2xpY3kgPT09IFJlbW92YWxQb2xpY3kuRm9yYmlkKSB7XG4gICAgcmVzb3VyY2Uub3B0aW9ucy5kZWxldGlvblBvbGljeSA9IERlbGV0aW9uUG9saWN5LlJldGFpbjtcbiAgfVxuXG4gIC8vIGF0dGFjaCBtZXRhZGF0YSB0aGF0IHdpbGwgdGVsbCB0aGUgdG9vbGtpdCB0byBwcm90ZWN0IHRoaXMgcmVzb3VyY2UgYnlcbiAgLy8gYXBwbHlpbmcgYW4gYXBwcm9wcmlhdGUgc3RhY2sgdXBkYXRlIHBvbGljeS5cbiAgaWYgKHJlbW92YWxQb2xpY3kgPT09IFJlbW92YWxQb2xpY3kuRm9yYmlkKSB7XG4gICAgcmVzb3VyY2Uubm9kZS5hZGRNZXRhZGF0YSgnYXdzOmNkazpwcm90ZWN0ZWQnLCB0cnVlKTtcbiAgfVxufVxuIl19